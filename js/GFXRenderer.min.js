/*
* GFXRenderer v1.0.3 Copyright (c) 2015 AJ Savino
* MIT LICENSE
*/
var GFXRenderer=function(e){var t=null,n={FPS:60},i={contextType:"2d",canvas:null,context:null,paused:!1,_resizer:null,_renderInterval:null,_normalTimer:null},r={init:function(){var e=t.canvas;if(!e)throw"Canvas does not exist.";var a=t.contextType,o=e.getContext(a);if(!o)throw"Context '"+a+"' could not be created. Ensure that this feature is supported by your browser.";t.context=o,i._resizer=new Resizer({onResize:r._resize}),r._updateSize(),i._normalTimer=new NormalTimer,"requestAnimationFrame"in window?requestAnimationFrame(r._render):i._renderInterval=setInterval(r._render,1e3/n.FPS)},destroy:function(){i._normalTimer=null;var e=i._renderInterval;e&&(clearInterval(e),i._renderInterval=null);var n=i._resizer;n&&(n.destroy(),i._resizer=null);var r=t.context;r&&(t.context=null)},_render:function(){var e=i._normalTimer;if(e){var n=e.tick();!t.paused&&1>n&&t.onRender(n),i._renderInterval||requestAnimationFrame(r._render)}},_resize:function(){r._updateSize(),t.onResize&&t.onResize()},_updateSize:function(){var e=t.canvas;e.width=e.clientWidth,e.height=e.clientHeight}};t={contextType:i.contextType,canvas:i.canvas,context:i.context,paused:i.paused,elapsed:function(){return i._normalTimer?i._normalTimer.elapsed():0/0},delta:function(){return i._normalTimer?i._normalTimer.delta():0/0},init:r.init,destroy:r.destroy,onRender:null,onResize:null};for(var a in e)t[a]=e[a];return t.init(),t},NormalTimer=function(){var e={_delta:0,_lastTime:0,_startTime:(new Date).getTime()};e._lastTime=e._startTime;var t={elapsed:function(){return.001*((new Date).getTime()-e._startTime)},delta:function(){return e._delta},tick:function(){var t=(new Date).getTime();return e._delta=.001*(t-e._lastTime),e._lastTime=t,e._delta}};return{elapsed:t.elapsed,delta:t.delta,tick:t.tick}},Resizer=function(e){var t=null,n={callbackDelay:300,_resizeEvent:"onorientationchange"in window?"orientationchange":"resize",_timeout:null},i={init:function(){window.addEventListener?window.addEventListener(n._resizeEvent,i._handler_resize,!1):window.attachEvent&&window.attachEvent("on"+n._resizeEvent,i._handler_resize)},destroy:function(){var e=n._timeout;e&&(clearTimeout(e),n._timeout=null),t.onResize=null,window.removeEventListener?window.removeEventListener(n._resizeEvent,i._handler_resize):window.detachEvent&&window.detachEvent("on"+n._resizeEvent,i._handler_resize)},getWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},getHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},_handler_resize:function(){var e=n._timeout;e&&(clearTimeout(e),n._timeout=null),n._timeout=setTimeout(function(){clearTimeout(e),n._timeout=null,t.onResize(t.getWidth(),t.getHeight())},t.callbackDelay)}};t={callbackDelay:n.callbackDelay,init:i.init,destroy:i.destroy,getWidth:i.getWidth,getHeight:i.getHeight,onResize:null};for(var r in e)t[r]=e[r];return t.init(),t};