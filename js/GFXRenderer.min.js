/*
* GFXRenderer v1.0.3 Copyright (c) 2016 AJ Savino
* https://github.com/koga73/GFXRenderer/
* MIT LICENSE
*/
var GFXRenderer=function(e){var n=null,t={FPS:60},i={contextType:"2d",canvas:null,context:null,paused:!1,_resizer:null,_renderInterval:null,_normalTimer:null},r={init:function(){var e=n.canvas;if(!e)throw"Canvas does not exist.";var a=n.contextType,o=e.getContext(a);if(!o)throw"Context '"+a+"' could not be created. Ensure that this feature is supported by your browser.";n.context=o,i._resizer=new Resizer({onResize:r._resize}),r._updateSize(),i._normalTimer=new NormalTimer,"requestAnimationFrame"in window?requestAnimationFrame(r._render):i._renderInterval=setInterval(r._render,1e3/t.FPS)},destroy:function(){i._normalTimer=null;var e=i._renderInterval;e&&(clearInterval(e),i._renderInterval=null);var t=i._resizer;t&&(t.destroy(),i._resizer=null);var r=n.context;r&&(n.context=null)},_render:function(){var e=i._normalTimer;if(e){var t=e.tick();!n.paused&&1>t&&n.onRender(t),i._renderInterval||requestAnimationFrame(r._render)}},_resize:function(){r._updateSize(),n.onResize&&n.onResize()},_updateSize:function(){var e=n.canvas;e.width=e.clientWidth,e.height=e.clientHeight}};n={contextType:i.contextType,canvas:i.canvas,context:i.context,paused:i.paused,elapsed:function(){return i._normalTimer?i._normalTimer.elapsed():0/0},delta:function(){return i._normalTimer?i._normalTimer.delta():0/0},init:r.init,destroy:r.destroy,onRender:null,onResize:null};for(var a in e)n[a]=e[a];return n.init(),n},NormalTimer=function(){var e={_delta:0,_lastTime:0,_startTime:(new Date).getTime()};e._lastTime=e._startTime;var n={elapsed:function(){return.001*((new Date).getTime()-e._startTime)},delta:function(){return e._delta},tick:function(){var n=(new Date).getTime();return e._delta=.001*(n-e._lastTime),e._lastTime=n,e._delta}};return{elapsed:n.elapsed,delta:n.delta,tick:n.tick}},Resizer=function(e){var n=null,t={callbackDelay:300,_lastOrientation:window.orientation,_timeout:null},i={init:function(){window.addEventListener?(window.addEventListener("resize",i._handler_resize,!1),window.addEventListener("orientationchange",i._handler_resize,!1)):window.attachEvent&&(window.attachEvent("onresize",i._handler_resize),window.attachEvent("onorientationchange",i._handler_resize))},destroy:function(){var e=t._timeout;e&&(clearTimeout(e),t._timeout=null),n.onResize=null,window.removeEventListener?(window.removeEventListener("resize",i._handler_resize),window.removeEventListener("orientationchange",i._handler_resize)):window.detachEvent&&(window.detachEvent("onresize",i._handler_resize),window.detachEvent("onorientationchange",i._handler_resize))},getWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},getHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},_handler_resize:function(){if("onorientationchange"in window){var e=window.orientation;if(e==t._lastOrientation)return;t._lastOrientation=e}var i=t._timeout;i&&(clearTimeout(i),t._timeout=null),t._timeout=setTimeout(function(){clearTimeout(i),t._timeout=null,n.onResize(n.getWidth(),n.getHeight())},n.callbackDelay)}};n={callbackDelay:t.callbackDelay,init:i.init,destroy:i.destroy,getWidth:i.getWidth,getHeight:i.getHeight,onResize:null};for(var r in e)n[r]=e[r];return n.init(),n};